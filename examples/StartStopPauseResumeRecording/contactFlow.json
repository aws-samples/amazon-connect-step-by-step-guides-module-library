{"Version":"2019-10-30","StartAction":"9db78e0b-1868-4e4b-8426-335c2d57569b","Metadata":{"entryPointPosition":{"x":360,"y":449.6},"ActionMetadata":{"425a2569-3e37-45f2-ad84-22a37a3e02c6":{"position":{"x":2176.8,"y":674.4},"parameters":{"LambdaFunctionARN":{"displayName":"callRecordingControl"},"LambdaInvocationAttributes":{"initialContactId":{"useDynamic":true}}},"dynamicMetadata":{"operation":false,"voiceRecordingTrack":false,"initialContactId":true}},"71a94556-d11b-440c-b0e0-49af9798557f":{"position":{"x":2142.4,"y":1370.4},"parameters":{"LambdaFunctionARN":{"displayName":"callRecordingControl"},"LambdaInvocationAttributes":{"initialContactId":{"useDynamic":true}}},"dynamicMetadata":{"operation":false,"initialContactId":true}},"09dcb64b-a678-43cd-a1ff-578635edaf13":{"position":{"x":2163.2,"y":1140},"parameters":{"LambdaFunctionARN":{"displayName":"callRecordingControl"},"LambdaInvocationAttributes":{"initialContactId":{"useDynamic":true}}},"dynamicMetadata":{"operation":false,"initialContactId":true}},"3ad99e0b-3788-4532-b0e2-213a620a16bc":{"position":{"x":2184,"y":896},"parameters":{"LambdaFunctionARN":{"displayName":"callRecordingControl"},"LambdaInvocationAttributes":{"initialContactId":{"useDynamic":true}}},"dynamicMetadata":{"operation":false,"initialContactId":true}},"9185e703-8404-4c6c-8634-e0bca2f2a6d2":{"position":{"x":2512.8,"y":1390.4},"dynamicParams":[]},"885aaf30-4205-411e-bb49-11578caa07a7":{"position":{"x":2504.8,"y":1140.8},"dynamicParams":[]},"04739096-0430-40d6-9d8d-1bf598123aa3":{"position":{"x":2491.2,"y":657.6},"dynamicParams":[]},"f93ce00e-ca19-4375-bce4-b7a476668a7b":{"position":{"x":1197.6,"y":827.2},"dynamicParams":[]},"797ce509-cd4b-4859-a1de-30996cb23366":{"position":{"x":2500.8,"y":900.8},"dynamicParams":[]},"877cf209-c11a-43e1-a68c-1d8ac353bab8":{"position":{"x":1554.4,"y":803.2},"conditions":[],"conditionMetadata":[{"id":"441ba2d0-bc67-4ea7-8d50-851693e60f94","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Start"},{"id":"c225bb24-3593-4b82-a07d-8a784c80f26c","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Stop"},{"id":"4c89c09f-0060-4af8-ab94-2c9da17379d5","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Pause"},{"id":"5e40eaee-d19a-4b3c-9d28-7508901ded1b","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Resume"}]},"9db78e0b-1868-4e4b-8426-335c2d57569b":{"position":{"x":580,"y":400.8}},"907f8cf3-db72-4d3b-ab27-60db8798cc1b":{"position":{"x":908.8,"y":410.4},"parameters":{"ViewResource":{"Id":{"displayName":"Cards"}},"InvocationTimeLimitSeconds":{"unit":60},"ViewData":{"AttributeBar":{"useJson":true},"Back":{"useJson":true},"Cards":{"useJson":true},"NoMatchFound":{"useJson":true}}}},"603a8c52-efa5-4e93-b02d-82f4e19c451d":{"position":{"x":1804.8,"y":595.2}}},"Annotations":[],"name":"AgentUI_StartStopPauseResumeCallRecording","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:297747336496:function:callRecordingControl","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"operation":"START","voiceRecordingTrack":"ALL","initialContactId":"$.Attributes.initialContactId"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"425a2569-3e37-45f2-ad84-22a37a3e02c6","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"04739096-0430-40d6-9d8d-1bf598123aa3","Errors":[{"NextAction":"04739096-0430-40d6-9d8d-1bf598123aa3","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:297747336496:function:callRecordingControl","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"operation":"RESUME","initialContactId":"$.Attributes.initialContactId"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"71a94556-d11b-440c-b0e0-49af9798557f","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"9185e703-8404-4c6c-8634-e0bca2f2a6d2","Errors":[{"NextAction":"9185e703-8404-4c6c-8634-e0bca2f2a6d2","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:297747336496:function:callRecordingControl","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"operation":"PAUSE","initialContactId":"$.Attributes.initialContactId"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"09dcb64b-a678-43cd-a1ff-578635edaf13","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"885aaf30-4205-411e-bb49-11578caa07a7","Errors":[{"NextAction":"885aaf30-4205-411e-bb49-11578caa07a7","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:297747336496:function:callRecordingControl","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"operation":"STOP","initialContactId":"$.Attributes.initialContactId"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"3ad99e0b-3788-4532-b0e2-213a620a16bc","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"797ce509-cd4b-4859-a1de-30996cb23366","Errors":[{"NextAction":"797ce509-cd4b-4859-a1de-30996cb23366","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"callRecordingHTML":" <p style='display: inline-block;color: green'>RECORDING ⬤</p>","callRecordingStatus":"ON"},"TargetContact":"Current"},"Identifier":"9185e703-8404-4c6c-8634-e0bca2f2a6d2","Type":"UpdateContactAttributes","Transitions":{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","Errors":[{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"callRecordingHTML":" <p style='display: inline-block;color: red'>NOT RECORDING ⬤</p>","callRecordingStatus":"OFF"},"TargetContact":"Current"},"Identifier":"885aaf30-4205-411e-bb49-11578caa07a7","Type":"UpdateContactAttributes","Transitions":{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","Errors":[{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"callRecordingHTML":" <p style='display: inline-block;color: green'>RECORDING ⬤</p>","callRecordingStatus":"ON"},"TargetContact":"Current"},"Identifier":"04739096-0430-40d6-9d8d-1bf598123aa3","Type":"UpdateContactAttributes","Transitions":{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","Errors":[{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"actionName":"$.Views.ViewResultData.actionName"},"TargetContact":"Current"},"Identifier":"f93ce00e-ca19-4375-bce4-b7a476668a7b","Type":"UpdateContactAttributes","Transitions":{"NextAction":"877cf209-c11a-43e1-a68c-1d8ac353bab8","Errors":[{"NextAction":"877cf209-c11a-43e1-a68c-1d8ac353bab8","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"callRecordingHTML":" <p style='display: inline-block;color: red'>NOT RECORDING ⬤</p>","callRecordingStatus":"OFF"},"TargetContact":"Current"},"Identifier":"797ce509-cd4b-4859-a1de-30996cb23366","Type":"UpdateContactAttributes","Transitions":{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","Errors":[{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Attributes.actionName"},"Identifier":"877cf209-c11a-43e1-a68c-1d8ac353bab8","Type":"Compare","Transitions":{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","Conditions":[{"NextAction":"425a2569-3e37-45f2-ad84-22a37a3e02c6","Condition":{"Operator":"Equals","Operands":["Start"]}},{"NextAction":"3ad99e0b-3788-4532-b0e2-213a620a16bc","Condition":{"Operator":"Equals","Operands":["Stop"]}},{"NextAction":"09dcb64b-a678-43cd-a1ff-578635edaf13","Condition":{"Operator":"Equals","Operands":["Pause"]}},{"NextAction":"71a94556-d11b-440c-b0e0-49af9798557f","Condition":{"Operator":"Equals","Operands":["Resume"]}}],"Errors":[{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"9db78e0b-1868-4e4b-8426-335c2d57569b","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"907f8cf3-db72-4d3b-ab27-60db8798cc1b"}},{"Parameters":{"ViewResource":{"Id":"cards","Version":"Latest"},"InvocationTimeLimitSeconds":"59940","ViewData":{"AttributeBar":[{"AutoOpen":false,"Label":"Example","Value":"Attribute","Copyable":false},{"AutoOpen":false,"ResourceId":"123","Label":"Example 2","Value":"Attribute 2","Copyable":false,"LinkType":"case"}],"Back":{"Label":"Back"},"Cards":[{"Summary":{"Status":"$.Attributes.callRecordingStatus","Heading":"Manage Call Recording","Description":"Start, Stop, Pause, Resume","Id":"card_1","Icon":"Tutorial"},"Detail":{"Sections":[{"TemplateString":"<table><tr><th style='font-weight:700;color:#077398'>Recording Status</th><th style='color:white;white-space: nowrap;'>$.Attributes.callRecordingHTML</th></tr></table>"}],"Actions":["Start","Stop","Pause","Resume"]}}],"Heading":"Customer may be contacting about...","NoMatchFound":{"Label":"It's something else"}}},"Identifier":"907f8cf3-db72-4d3b-ab27-60db8798cc1b","Type":"ShowView","Transitions":{"NextAction":"603a8c52-efa5-4e93-b02d-82f4e19c451d","Conditions":[{"NextAction":"f93ce00e-ca19-4375-bce4-b7a476668a7b","Condition":{"Operator":"Equals","Operands":["ActionSelected"]}},{"NextAction":"9db78e0b-1868-4e4b-8426-335c2d57569b","Condition":{"Operator":"Equals","Operands":["Back"]}},{"NextAction":"9db78e0b-1868-4e4b-8426-335c2d57569b","Condition":{"Operator":"Equals","Operands":["NoMatchFound"]}}],"Errors":[{"NextAction":"603a8c52-efa5-4e93-b02d-82f4e19c451d","ErrorType":"NoMatchingCondition"},{"NextAction":"603a8c52-efa5-4e93-b02d-82f4e19c451d","ErrorType":"NoMatchingError"},{"NextAction":"603a8c52-efa5-4e93-b02d-82f4e19c451d","ErrorType":"TimeLimitExceeded"}]}},{"Parameters":{},"Identifier":"603a8c52-efa5-4e93-b02d-82f4e19c451d","Type":"DisconnectParticipant","Transitions":{}}]}